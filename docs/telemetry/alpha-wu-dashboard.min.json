{
  "$schema": "https://agi.alpha/schemas/dashboard/v1.json",
  "version": "1.0.0",
  "title": "α‑WU KPI Minimal",
  "description": "Four golden KPIs for alpha work units backed by Prometheus + subgraph feeds.",
  "domains": ["slo", "validation"],
  "datasources": [
    {
      "name": "prometheus",
      "type": "prometheus",
      "endpoint": "http://alpha-node.local:9464/metrics"
    },
    {
      "name": "alphaSubgraph",
      "type": "subgraph",
      "endpoint": "https://api.thegraph.com/subgraphs/name/agi/alpha-work-units"
    }
  ],
  "widgets": [
    {
      "type": "status",
      "title": "Telemetry Health Gate",
      "datasource": "prometheus",
      "metric": "agi_alpha_node_health_gate_state",
      "labels": { "state": "ready" },
      "mode": "state",
      "thresholds": {
        "warning": 0.5,
        "critical": 0.1
      }
    },
    {
      "type": "stat",
      "title": "Acceptance Rate · 7d",
      "datasource": "prometheus",
      "metric": "agi_alpha_node_alpha_wu_acceptance_rate",
      "labels": { "window": "7d" },
      "format": "percent"
    },
    {
      "type": "stat",
      "title": "Validator-Weighted Quality · 7d",
      "datasource": "prometheus",
      "metric": "agi_alpha_node_alpha_wu_quality",
      "labels": { "window": "7d", "dimension": "validator" },
      "format": "decimal"
    },
    {
      "type": "stat",
      "title": "On-Time Completion p95 · 7d",
      "datasource": "prometheus",
      "metric": "agi_alpha_node_alpha_wu_on_time_p95_seconds",
      "labels": { "window": "7d" },
      "format": "duration"
    },
    {
      "type": "status",
      "title": "On-Time Completion SLO · 30d",
      "datasource": "prometheus",
      "metric": "agi_alpha_node_alpha_wu_on_time_p95_seconds",
      "labels": { "window": "30d" },
      "mode": "slo",
      "thresholds": {
        "target": 1800,
        "warning": 2700,
        "critical": 3600
      },
      "description": "Tracks p95 mint→accept cycle time against the 30-minute target."
    },
    {
      "type": "stat",
      "title": "Slashing-Adjusted Yield · 7d",
      "datasource": "prometheus",
      "metric": "agi_alpha_node_alpha_wu_slash_adjusted_yield",
      "labels": { "window": "7d" },
      "format": "percent"
    },
    {
      "type": "table",
      "title": "Top Validators by Stake-Weighted Quality",
      "datasource": "alphaSubgraph",
      "query": "{ validatorMetricWindows(first: 5, orderBy: validatorWeightedQuality, orderDirection: desc, where: { windowDays: 7 }) { validator { id } validatorWeightedQuality acceptanceRate onTimeP95Seconds } }",
      "columns": [
        { "key": "validator.id", "label": "Validator", "format": "hash" },
        { "key": "validatorWeightedQuality", "label": "Quality", "format": "decimal" },
        { "key": "acceptanceRate", "label": "Acceptance", "format": "percent" },
        { "key": "onTimeP95Seconds", "label": "p95", "format": "duration" }
      ]
    }
  ]
}
